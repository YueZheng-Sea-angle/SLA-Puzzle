# SLA-Puzzle 测试指南

本指南详细介绍了SLA-Puzzle拼图游戏项目的测试工具、测试文档和测试方法，帮助开发人员和测试人员快速上手测试工作。

## 测试文档和工具概述

项目包含以下主要测试资源：

1. **综合测试文档** (`COMPREHENSIVE_TEST_DOCUMENTATION.md`)：包含完整的测试方案、测试用例和测试结果说明
2. **功能测试套件** (`feature_test_suite.js`)：用于测试核心功能模块的自动化测试脚本
3. **一小时性能测试脚本** (`hourly_performance_test.js`)：用于进行长时间性能压力测试的脚本

## 测试环境准备

### 1. 安装依赖

项目使用pnpm作为包管理器，请确保已安装：

```bash
# 安装所有依赖
npm install
```

### 2. 开发环境启动

在运行测试前，确保开发服务器正常运行：

```bash
# 启动开发服务器
npm run dev
```

### 3. 浏览器要求

- Chrome 120+ / Firefox 119+ / Safari 17+ / Edge 120+
- 启用JavaScript和Canvas支持
- 推荐分辨率：1024x768及以上

## 测试脚本运行方法

### 1. 运行集成测试

项目默认的测试脚本配置为运行集成测试：

```bash
# 运行集成测试
npm run test
```

这将执行 `integration-test.js` 文件中的测试用例。

### 2. 运行功能测试套件

功能测试套件包含对核心模块的详细测试：

```bash
# 运行功能测试套件
node feature_test_suite.js
```

运行后，测试套件会：
- 依次测试拼图生成、游戏逻辑、用户认证、成就系统和排行榜等模块
- 在控制台输出测试进度和结果
- 自动生成HTML格式的测试报告并保存到项目根目录

### 3. 运行一小时性能测试

一小时性能测试用于评估游戏在长时间运行下的稳定性和性能表现：

```bash
# 运行一小时性能测试
node hourly_performance_test.js
```

运行后，测试脚本会：
- 连续运行1小时，模拟用户进行游戏的场景
- 收集游戏完成数量、平均耗时、错误率等关键性能指标
- 生成包含图表的HTML格式性能测试报告

## 测试报告查看

### 1. 功能测试报告

功能测试套件运行完成后，会在项目根目录生成类似 `feature_test_report_YYYY-MM-DDTHH-mm-ss.html` 的文件。

使用浏览器打开该文件，可以查看：
- 测试总览（通过/失败数量、通过率、耗时等）
- 各模块测试结果对比图表
- 所有测试用例的详细结果
- 按模块分组的测试结果

### 2. 性能测试报告

一小时性能测试完成后，会在项目根目录生成类似 `hourly_performance_report_YYYY-MM-DDTHH-mm-ss.html` 的文件。

使用浏览器打开该文件，可以查看：
- 测试总览（总游戏局数、平均耗时、错误率等）
- 性能趋势图表（随时间变化的性能表现）
- 不同难度拼图的性能对比
- 内存使用和FPS等关键指标

## 一小时测试重点执行指南

根据综合测试文档，一小时测试是快速验证游戏核心功能的重要方法。以下是简化的执行流程：

### 1. 环境检查（0-5分钟）
- 确保开发服务器正常启动
- 检查浏览器控制台是否有错误
- 准备测试账户

### 2. 核心游戏功能测试（5-20分钟）
- 测试不同难度拼图的生成
- 验证拼图拖拽与放置逻辑
- 测试旋转、翻转等交互功能

### 3. 性能压力测试（20-35分钟）
- 使用 `hourly_performance_test.js` 进行压力测试
- 监控内存使用和CPU占用

### 4. 异常场景测试（35-50分钟）
- 测试无效图片上传
- 验证网络中断的处理
- 测试快速连续操作

### 5. 结果分析（50-60分钟）
- 查看测试报告和控制台输出
- 识别潜在问题和优化方向
- 填写测试结果记录

## 测试结果记录

测试完成后，请使用 `COMPREHENSIVE_TEST_DOCUMENTATION.md` 中提供的测试结果记录模板记录测试情况：

```
测试日期: YYYY-MM-DD
测试环境: 浏览器版本, 操作系统, 设备信息
测试人员: 

1. 功能测试结果
   - 通过测试数: 
   - 失败测试数: 
   - 主要问题: 

2. 性能测试结果
   - 平均加载时间: 
   - 平均渲染时间: 
   - 内存占用峰值: 
   - FPS平均值: 

3. 一小时测试特别记录
   - 完成游戏局数: 
   - 平均每局耗时: 
   - 错误率: 
   - 性能趋势: 

4. 总结与建议
   - 总体评价: 
   - 关键改进点: 
   - 测试结论: 
```

## 常见问题排查

1. **测试脚本无法运行**
   - 确认Node.js版本符合要求（推荐v16+）
   - 检查项目依赖是否已正确安装
   - 验证文件路径是否正确

2. **测试报告无法生成**
   - 确认有写入文件的权限
   - 检查磁盘空间是否充足
   - 查看控制台输出的错误信息

3. **性能测试数据异常**
   - 关闭其他占用系统资源的程序
   - 确保网络连接稳定
   - 检查浏览器是否有其他标签页占用资源

## 持续测试建议

为了保持游戏的质量和稳定性，建议：

1. 在每次代码更新后运行功能测试套件
2. 定期（如每周）运行一小时性能测试
3. 将测试集成到CI/CD流程中
4. 记录和跟踪测试结果，建立性能基准线

## 联系信息

如有测试相关问题，请联系项目负责人或开发团队。

---

更新日期：2025年9月12日