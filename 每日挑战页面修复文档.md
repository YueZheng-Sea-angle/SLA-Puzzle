# 每日挑战页面修复文档

## 1. 问题概述

在项目开发过程中，发现每日挑战页面存在以下问题：
1. 图片路径不一致：每日挑战使用了绝对路径`/src-tauri/icons/Square284x284Logo.png`，而普通关卡使用相对路径
2. 根据Vite配置，`src-tauri`目录被忽略监听，可能导致资源加载问题
3. 页面显示信息冗余：同时显示完成数和正确数

## 2. 修复内容

### 2.1 图片路径一致性修复

#### 问题分析
- 普通关卡在[puzzleAssets.ts](file:///c:/Users/invain/Desktop/SLA-Puzzle/src/data/puzzleAssets.ts)中使用相对路径，如`/images/nature/landscape1.svg`
- 每日挑战在[DailyChallenge.tsx](file:///c:/Users/invain/Desktop/SLA-Puzzle/src/pages/DailyChallenge.tsx)和[DailyChallengeNew.tsx](file:///c:/Users/invain/Desktop/SLA-Puzzle/src/pages/DailyChallengeNew.tsx)中使用绝对路径`/src-tauri/icons/Square284x284Logo.png`
- Vite配置中忽略了`src-tauri`目录的监听，可能导致资源加载问题

#### 修复方案
将每日挑战中的图片路径修改为与普通关卡一致的相对路径：

```typescript
// 拼图图片库
const puzzleImageLibrary = [
  { path: '/images/nature/landscape1.svg', title: '梦幻城堡', description: '一座隐藏在云端的神秘城堡，等待着勇敢的冒险者来探索' },
  { path: '/images/nature/landscape2.svg', title: '樱花飞舞', description: '春日樱花盛开的美景' },
  { path: '/images/nature/landscape3.svg', title: '星空之夜', description: '浩瀚星空下的宁静夜晚' },
  { path: '/images/animals/cat.svg', title: '草原之王', description: '非洲草原上的雄狮，展现王者风范' },
  { path: '/images/nature/landscape1.svg', title: '高山流水', description: '壮丽的山脉与清澈的溪流' },
  { path: '/images/anime/character.svg', title: '动漫角色', description: '来自异世界的神秘角色' },
  { path: '/images/buildings/castle.svg', title: '城市之巅', description: '现代化都市的摩天大楼' }
];
```

#### 涉及文件
- [src/pages/DailyChallenge.tsx](file:///c:/Users/invain/Desktop/SLA-Puzzle/src/pages/DailyChallenge.tsx)
- [src/pages/DailyChallengeNew.tsx](file:///c:/Users/invain/Desktop/SLA-Puzzle/src/pages/DailyChallengeNew.tsx)

### 2.2 页面显示信息优化

#### 问题分析
每日挑战页面历史记录中同时显示完成数（时间）和正确数（步数），信息冗余。

#### 修复方案
删除正确数（步数）显示，只保留完成数（时间）显示。

#### 涉及文件
- [src/pages/DailyChallenge.tsx](file:///c:/Users/invain/Desktop/SLA-Puzzle/src/pages/DailyChallenge.tsx)

### 2.3 游戏页面显示信息优化

#### 问题分析
每日挑战游戏页面顶部同时显示正确块数和当前步数，信息冗余。

#### 修复方案
删除正确块数显示，只保留当前步数显示。

#### 涉及文件
- [src/pages/DailyChallengeGame.tsx](file:///c:/Users/invain/Desktop/SLA-Puzzle/src/pages/DailyChallengeGame.tsx)

## 3. 技术规范遵循

### 3.1 Vite构建配置
根据Vite配置要求，确保所有资源路径使用相对路径，避免引用被忽略监听的`src-tauri`目录。

### 3.2 资源路径一致性
确保每日挑战与普通关卡使用相同的资源路径规范，提高代码维护性。

## 4. 验证结果

修复后：
1. 每日挑战页面与普通关卡使用一致的图片资源路径
2. 页面显示信息更加简洁，避免冗余
3. 符合Vite构建工具的配置要求
4. 提高了代码的一致性和可维护性

## 5. 后续建议

1. 定期检查资源路径一致性，确保新功能开发遵循相同规范
2. 对于历史遗留的绝对路径引用，逐步进行改造
3. 建立代码审查机制，防止类似问题再次出现